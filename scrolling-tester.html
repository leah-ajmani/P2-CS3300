<!doctype html>

<html lang="en">
<head>
  <meta charset="utf-8">
  <title>Scroll</title>
  <script src="https://d3js.org/d3.v4.min.js"></script>
  <link rel="stylesheet" href="css/styles.css?v=1.0">
</head>

<body>
	<svg id="scrolling-text" height='800' width='200'>
  <script>
  	var scrollablePixels = 1000;
  	var last_known_scroll_position = 0;
	var ticking = false;
	var scrollingSvg = d3.select('scrolling-text');
	var newPos = d3.interpolateNumber(0,1000);
	var textPositions = [];
	function initText(){
		for (var i = 0; i < 5; i++) {
			var text = "Text " + i;
			textPositions.push({
				'text': ("Text " + i),
				'last_pos': 200*i
			})
		}
	}

	function doSomething(scroll_pos) {
	  	console.log('position')
	  	console.log(scroll_pos);
	  	console.log('interpolated')
		console.log(newPos(scroll_pos/1000));
	}

	window.addEventListener('scroll', function(e) {
	  last_known_scroll_position = window.scrollY;
	  if (!ticking) {
	    window.requestAnimationFrame(function() {
	      doSomething(last_known_scroll_position);
	      ticking = false;
	    });
	  }
	  ticking = true;
	});
  </script>
</body>
</html>